<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Patholytica ‚Äî by MedicineBank</title>

<style>
/* THEME VARIABLES */
:root {
  --bg-color: #0d0d0d;
  --text-color: #fff;
  --card-bg: rgba(24,24,24,0.7);
  --card-border: rgba(255,255,255,0.07);
  --accent: #ff4d4d;
  --accent-hover: #ff3333;
}

body.light-theme {
  --bg-color: #f5f5f5;
  --text-color: #111;
  --card-bg: rgba(255,255,255,0.65);
  --card-border: rgba(0,0,0,0.1);
  --accent: #e53935;
  --accent-hover: #c62828;
}

/* GLOBAL */
* { box-sizing: border-box; }
html, body { margin:0; padding:0; height:100%; font-family:"Inter", Arial; }
body {
  background: var(--bg-color);
  color: var(--text-color);
  display:flex;
  flex-direction:column;
  transition:background .35s ease;
}

/* HEADER */
.header-wrapper {
  position:sticky;
  top:0;
  background:var(--bg-color);
  padding-top:env(safe-area-inset-top);
  border-bottom:1px solid var(--card-border);
  z-index:40;
}
.header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:16px 18px;
}
.logo-img {
  height:32px;
  width:auto;
  transition:filter .25s ease;
  cursor:pointer;
}
body.light-theme .logo-img { filter:invert(1); }

.theme-toggle {
  padding:6px 14px;
  font-size:12.5px;
  background:transparent;
  border-radius:6px;
  border:1px solid var(--card-border);
  color:var(--text-color);
  cursor:pointer;
  transition:.25s ease;
}
.theme-toggle:hover { border-color:var(--accent); color:var(--accent); }

/* MAIN */
.login-container {
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:40px 20px;
}
.login-card {
  width:100%;
  max-width:430px;
  padding:55px 42px;
  background:var(--card-bg);
  backdrop-filter:blur(22px);
  border-radius:16px;
  border:1px solid var(--card-border);
  text-align:center;
  box-shadow:0 8px 28px rgba(0,0,0,0.45);
  animation:fadeUp .5s ease both;
}
.login-card h1 { font-size:32px; margin-bottom:12px; }
.login-card p { font-size:15px; margin-bottom:20px; color:#999; }

/* BUTTONS */
.login-btn {
  display:block;
  padding:16px 42px;
  font-size:16px;
  font-weight:600;
  background:var(--accent);
  color:#fff;
  border-radius:10px;
  border:none;
  cursor:pointer;
  width:100%;
  margin-bottom:6px;
  transition:.25s ease;
}
.login-btn:hover { transform:translateY(-2px); background:var(--accent-hover); }

/* INPUT */
.input-field {
  width:100%;
  padding:14px;
  margin-bottom:14px;
  border-radius:8px;
  border:1px solid var(--card-border);
  background:rgba(0,0,0,0.25);
  color:var(--text-color);
}
body.light-theme .input-field { background:rgba(255,255,255,0.7); }

/* Guest Mode */
.guest-text {
  display:block;
  font-size:14px;
  color:var(--accent);
  font-weight:600;
  cursor:pointer;
}
.guest-text:hover { text-decoration:underline; }

/* FOOTER */
footer {
  text-align:center;
  padding:16px;
  font-size:11px;
  border-top:1px solid var(--card-border);
  color:#888;
}
footer a { color:#888; text-decoration:none; }
footer a:hover { color:var(--accent); }

/* Animation */
@keyframes fadeUp {
  from { opacity:0; transform:translateY(20px); }
  to { opacity:1; transform:translateY(0); }
}
</style>
</head>
<body>

<!-- HEADER -->
<div class="header-wrapper">
  <div class="header">
    <a href="#"><img src="IMG_0696.png" class="logo-img" alt="logo"></a>
    <button class="theme-toggle" onclick="toggleTheme()">Theme</button>
  </div>
</div>

<!-- MAIN -->
<div class="login-container">
  <div class="login-card">

    <h1>Welcome to Patholytica</h1>
    <p>Your tool to <strong>LOVE</strong> what you learn</p>

    <!-- Login button -->
    <a class="login-btn" id="startLoginBtn">üîê Login to Continue</a>

    <!-- Guest Mode -->
    <span class="guest-text" id="guestBtn">Guest Mode</span>

    <!-- LOGIN FORM -->
    <form id="loginForm" style="display:none; margin-top:20px;">
      <input type="email" placeholder="Email" name="email" class="input-field" required>
      <input type="password" placeholder="Password" name="password" class="input-field" required>

      <button class="login-btn" type="submit">Continue</button>

      <p style="font-size:14px; margin-top:20px; color:#999;">
        Don't have an account?
        <a href="#" id="showSignupLink" style="color:var(--accent); font-weight:600;">Sign up</a>
      </p>
    </form>

    <!-- SIGNUP FORM -->
    <form id="signupForm" style="display:none; margin-top:20px;">
      <input type="text" placeholder="Full Name" name="name" class="input-field" required>
      <input type="email" placeholder="Email" name="email" class="input-field" required>
      <input type="text" placeholder="Username" name="username" class="input-field" required>
      <input type="password" placeholder="Password (min 8 chars)" name="password" minlength="8" class="input-field" required>
      <input type="password" placeholder="Confirm Password" name="confirm" class="input-field" required>

      <button class="login-btn" type="submit">Create Account</button>

      <p style="font-size:14px; margin-top:20px; color:#999;">
        Already have an account?
        <a href="#" id="showLoginLink" style="color:var(--accent); font-weight:600;">Login</a>
      </p>
    </form>

  </div>
</div>

<footer>
  ¬© 2025 Patholytica by MedicineBank. All rights reserved.
</footer>


<!-- SUPABASE CLIENT -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabase = supabase.createClient(
  "https://kmwuqrbkbqhqhjncmzms.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imttd3VxcmJrYnFocWhqbmNtem1zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMxNTg5MDYsImV4cCI6MjA3ODczNDkwNn0.DNhDZcoM3diHK5DEhtcQV4BTFfxz2996corYikb06C8"
);

/* THEME */
function toggleTheme(){
  document.body.classList.toggle("light-theme");
  localStorage.setItem("theme", document.body.classList.contains("light-theme") ? "light" : "dark");
}
if (localStorage.getItem("theme")==="light") document.body.classList.add("light-theme");

/* ELEMENTS */
const startBtn = document.getElementById("startLoginBtn");
const loginForm = document.getElementById("loginForm");
const signupForm = document.getElementById("signupForm");
const showSignupLink = document.getElementById("showSignupLink");
const showLoginLink = document.getElementById("showLoginLink");

/* SHOW LOGIN FORM */
startBtn.addEventListener("click", () => {
  startBtn.style.display="none";
  guestBtn.style.display="none";
  loginForm.style.display="block";
});

/* GUEST */
guestBtn.addEventListener("click", () => {
  alert("Entering guest mode‚Ä¶");
});

/* SWITCH TO SIGNUP */
showSignupLink.addEventListener("click", e => {
  e.preventDefault();
  loginForm.style.display="none";
  signupForm.style.display="block";
});

/* SWITCH BACK */
showLoginLink.addEventListener("click", e => {
  e.preventDefault();
  signupForm.style.display="none";
  loginForm.style.display="block";
});

/* LOGIN PROCESS */
loginForm.addEventListener("submit", async e => {
  e.preventDefault();

  const email = loginForm.email.value;
  const password = loginForm.password.value;

  const { error } = await supabase.auth.signInWithPassword({ email, password });

  if (error) return alert(error.message);

  window.location.href = "dashboard.html";
});

/* SIGNUP PROCESS */
signupForm.addEventListener("submit", async e => {
  e.preventDefault();

  const full_name = signupForm.name.value;
  const username = signupForm.username.value;
  const email = signupForm.email.value;
  const password = signupForm.password.value;
  const confirm = signupForm.confirm.value;

  if (password !== confirm) return alert("Passwords do not match.");

  const { data, error } = await supabase.auth.signUp({
    email,
    password,
    options: { data: { full_name, username } }
  });

  if (error) return alert(error.message);

  alert("Account created! Check your email to verify.");
  window.location.href = "dashboard.html";
});
</script>

</body>
</html>